<%= form_for(@car, :url => '/car/save') do |f| %>
  <%= f.hidden_field :id %>
  <%= f.hidden_field :owner_id %>
  <%= f.hidden_field :sold %>
  <fieldset>
    <legend>Car Details</legend>
    <table>
      <tr>
        <th>Make</th>
        <td><%= select_tag "make_id", options_from_collection_for_select(@makes, "id", "name", @car.make), :include_blank => true %></td>
      </tr>
      <tr>
        <th>Model</th>
        <td>
          <% if @car_models.nil? %>
            <select id="car_model_id" name="car[car_model_id]"></select>
          <% else %>
            <%= select_tag "car[car_model_id]", options_from_collection_for_select(@car_models, "id", "name", @car.car_model_id), :include_blank => true %></td>
          <% end %>
        </td>
      </tr>
      <tr>
        <th>Year</th>
        <td><%= select_year(@car.year, :start_year => 1992, :end_year => Date.today.year + 1, :include_blank => true) %></td>
      </tr>
      <tr>
        <th>Description</th>
        <td><%= f.text_area :description, :rows => 5 %></td>
      </tr>
      <tr>
        <th>Price</th>
        <td><%= f.text_field :price %></td>
      </tr>
      <tr>
        <th>Doors</th>
        <td><%= f.text_field :doors %></td>
      </tr>
      <tr>
        <th>Seats</th>
        <td><%= f.text_field :seats %></td>
      </tr>
    </table>
  </fieldset>
  <% if @car.new_record? %>
    <%= render :partial => 'owner/owner_form' %>
  <% end %>

  <%= f.submit "Save" %>
<% end %>
